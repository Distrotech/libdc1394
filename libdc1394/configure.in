# process this file with autoconf to get a configure script
AC_INIT(libdc1394/dc1394_control.c)

AM_INIT_AUTOMAKE(libdc1394, 1.2.1)
AM_CONFIG_HEADER(config.h)

AC_PROG_CC
AC_PROG_LIBTOOL
AM_PROG_LIBTOOL

# Check for the new version of libraw1394 first since they might have both
# installed and we want to use the newest version
AC_CHECK_LIB(raw1394, raw1394_new_handle,
             [AC_DEFINE(HAVE_LIBRAW1394,[],[Defined if libraw1394 is present]) LIBS="$LIBS -lraw1394";break],
             AC_CHECK_LIB(raw1394, raw1394_get_handle,
			  [AC_DEFINE(LIBRAW1394_OLD,[],[Defined if an old version of libraw1394 is present]) AC_DEFINE(HAVE_LIBRAW1394,[],[Defined if libraw1394 is present]) LIBS="$LIBS -lraw1394"  ;break ],
                          AC_MSG_ERROR(No version of libraw1394 found!)))

AC_HEADER_STDC 
AC_CHECK_HEADERS(fcntl.h sys/ioctl.h unistd.h)
AC_PATH_XTRA

AC_TYPE_SIZE_T

AC_FUNC_MMAP

# set the libtool shared library version numbers
lt_major=13
lt_revision=1
lt_age=1

AC_SUBST(lt_major)
AC_SUBST(lt_revision)
AC_SUBST(lt_age)

CFLAGS="$CFLAGS -Wall -Wunused"
AC_OUTPUT([ Makefile libdc1394/Makefile examples/Makefile ])
